<h1>Cannon target shooter</h1>

<div>
    <div>
        <canvas style="background:#999;" #cannonBallCanvas (wheel)="onMouseWheel($event)"
            (contextmenu)="$event.preventDefault()"
            (mousemove)="onMouseMove($event)"
            (dblclick)="onDoubleClick($event)"
            [width]="canvasWidth"
            [height]="canvasHeight"></canvas>
    </div>
</div>

<div class="row">
    <div class="col">
        <div class="mb-3">
            <label class="form-label">Zoom factor</label>
            <div class="form-text">Use mouse wheel for now</div>
        </div>
    </div>

    <div class="col">
        <div class="mb-3">
            <label class="form-label">Launch velocity</label>
            <div class="input-group">
                <input type="range" min="1" step="1" max="250" [(ngModel)]="launchPower" />
            </div>
            <div class="form-text">{{ launchPower() }} m/s</div>
        </div>
    </div>

    <div class="col">
        <div class="mb-3">
            <label class="form-label">Launch angle</label>
            <div class="input-group">
                <input type="range" min="0" step="1" max="90" [(ngModel)]="launchAngle" />
            </div>
            <div class="form-text">{{ launchAngle() }}Â°</div>
        </div>
    </div>

    <div class="input-group mb-3">
        <button type="button" class="btn btn-primary" (click)="dropCannonBall()">Drop the ball</button>
        <button type="button" class="btn btn-primary" (click)="shootCannonBall()">Shoot the ball</button>
    </div>
</div>

<div class="row">
    <div class="col">
        <h3>TODOS</h3>
        <ul>
            <li>When zoomed out enough that the viewport covers more than the map height/width, flickering occurs
                when moving the viewport</li>
            <li>
                When zoomed out enough, the minimap viewport rect overflows the minimap rect
            </li>
            <li>Viewport should zoom around center point</li>
            <li>Click on minimap to move viewport quickly</li>
            <li>Add some backdrop for a visual guide</li>
            <li>Instead of launch velocity, use "explosive energy" and convert it to speed. Be able to adjust explosives
                and ball weight for varied initial speed.</li>
            <li>Calculate impact energy and do scoring/damage/whatever on that</li>
            <li>Draw an actual cannon</li>
            <li>Better maps? Maybe curved surfaces (this makes collision detection harder)?</li>
            <li>Currently the full terrain is drawn. Filter for visible parts.</li>
            <li>Better maps, maybe map editor? Separate out a renderer so it can render a menu</li>
            <li>Add targets to shoot</li>
            <li>Play with keyboard?</li>
            <li>Fullscreen?</li>
            <li>Difficult: impact craters (very difficult when impacts separate a ground poly into more distinct ones)
            </li>
            <li>Separate out physics stuff into a helper</li>
        </ul>
    </div>
</div>